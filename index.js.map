{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/ref.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    const res = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: '25786434-348adb767e319176b4ad356ea',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    });\n    return res.data;\n}","export const refs = {\n    galleryEl: document.querySelector('.gallery'),\nformEL: document.querySelector('.form'),\n    btnLoadMoreEl: document.querySelector('.btn-load-more'),\nloaderEl: document.querySelector('.loader')\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { refs } from \"./ref\";\n\nlet gallery = new SimpleLightbox('.gallery a');\n    gallery.on('show.simplelightbox', function () {});\n\n\nexport function createGallery(images, status) {\n    const markup = images.map(img => `<li class=\"photo-card\">\n          <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n          <div class=\"info\">\n            <p><b>Likes</b> <span>${img.likes}</span></p>\n            <p><b>Views</b> <span>${img.views}</span></p>\n            <p><b>Comments</b> <span>${img.comments}</span></p>\n            <p><b>Downloads</b> <span>${img.downloads}</span></p>\n          </div>\n          </a>\n        </li>`).join('\\n');\n    if (status === 'replace') {\n         refs.galleryEl.innerHTML = markup;\n    }else if (status === 'append') {\n    refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n    }\n    gallery.refresh();\n}\nexport function clearGallery() {\n        refs.galleryEl.innerHTML = '';\n}\nexport function showLoader() {\n    refs.loaderEl.classList.remove('hidden');\n}\nexport function hideLoader() {\n    refs.loaderEl.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    refs.btnLoadMoreEl.classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n    refs.btnLoadMoreEl.classList.add('hidden');\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from \"./js/render-functions\";\nimport { refs } from \"./js/ref\";\n\n\nlet inputValue;\nlet page;\nlet maxPage = 0;\nconst PAGE_SIZE = 15;\n\n\nrefs.formEL.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    inputValue = e.target.elements.searchText.value.trim();\n    page = 1;\n    if (inputValue === '') {\n         iziToast.error({\n                title: 'Enter value',\n                position: 'bottomRight'\n         });\n        return;\n    }\n        hideLoadMoreButton();\n    clearGallery();\n    showLoader();\n    try {\n        const res = await getImagesByQuery(inputValue, page)\n       createGallery(res.hits, 'replace');\n        maxPage = Math.ceil(res.totalHits / PAGE_SIZE);\n        \n    } catch {\n         iziToast.error({\n                title: 'Error',\n                position: 'bottomRight'\n         });\n    } finally {\n        hideLoader();\n        showNotification();\n    checkBtnLoadMoreVisible();\n    }\n    e.target.reset();\n})\n\n\n\nrefs.btnLoadMoreEl.addEventListener('click', async () => {\n    page += 1;\n            hideLoadMoreButton();\n    showNotification();\n    showLoader();\n    try {\n        const res = await getImagesByQuery(inputValue, page)\n        createGallery(res.hits, 'append');\n\n        const firstCard = document.querySelector('.photo-card');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n        \n    } catch {\n         iziToast.error({\n                title: 'Error',\n                position: 'bottomRight'\n         });\n    } finally {\n                hideLoader();\n                checkBtnLoadMoreVisible();\n\n    }\n})\n\n\nfunction checkBtnLoadMoreVisible() {\n    if (page < maxPage) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton();\n    }\n}\n\n\nfunction showNotification() {\n    if (maxPage === 0) {\n        iziToast.error({\n            title: `Sorry, there are no images matching your search query. Please try again!`,\n            position: 'bottomRight'\n        })\n    } else if (page === maxPage) {  \n        iziToast.info({\n            title: `We're sorry, but you've reached the end of search results.`,\n            position: 'bottomRight'\n        })\n    } else if (page === 1) {\n        iziToast.info({\n            title: `Max page: ${maxPage}`,\n            position: 'bottomRight'\n        })\n    }\n}"],"names":["getImagesByQuery","query","page","axios","refs","gallery","SimpleLightbox","createGallery","images","status","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","inputValue","maxPage","PAGE_SIZE","e","iziToast","res","showNotification","checkBtnLoadMoreVisible","firstCard","cardHeight"],"mappings":"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"}