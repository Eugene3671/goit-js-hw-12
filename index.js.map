{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/ref.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImagesByQuery(query, page) {\n    const res = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: '25786434-348adb767e319176b4ad356ea',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page,\n        }\n    });\n    return res.data;\n}","export const refs = {\n    galleryEl: document.querySelector('.gallery'),\nformEL: document.querySelector('.form'),\n    btnLoadMoreEl: document.querySelector('.btn-load-more'),\nloaderEl: document.querySelector('.loader')\n}","\nimport { refs } from \"./ref\";\n\nexport function createGallery(images) {\n    const markup = images.map(img => `<li class=\"photo-card\">\n          <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n          <div class=\"info\">\n            <p><b>Likes</b> <span>${img.likes}</span></p>\n            <p><b>Views</b> <span>${img.views}</span></p>\n            <p><b>Comments</b> <span>${img.comments}</span></p>\n            <p><b>Downloads</b> <span>${img.downloads}</span></p>\n          </div>\n          </a>\n        </li>`).join('\\n');\n  return markup;\n}\nexport function clearGallery() {\n        refs.galleryEl.innerHTML = '';\n}\nexport function showLoader() {\n    refs.loaderEl.classList.remove('hidden');\n}\nexport function hideLoader() {\n    refs.loaderEl.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n    refs.btnLoadMoreEl.classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n    refs.btnLoadMoreEl.classList.add('hidden');\n}","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from \"./js/render-functions\";\nimport { refs } from \"./js/ref\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet gallery = new SimpleLightbox('.gallery a');\n    gallery.on('show.simplelightbox', function () {});\n\n\n\nlet inputValue;\nlet page;\nlet maxPage = 0;\nconst PAGE_SIZE = 15;\n\n\nrefs.formEL.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    inputValue = e.target.elements.searchText.value.trim();\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    try {\n        const res = await getImagesByQuery(inputValue, page)\n        const markup = createGallery(res.hits);\n        refs.galleryEl.innerHTML = markup;\n  gallery.refresh();\n\n        maxPage = Math.ceil(res.totalHits / PAGE_SIZE);\n        hideLoader();\n        \n    } catch {\n         iziToast.error({\n                title: 'Error',\n                position: 'bottomRight'\n         });\n        hideLoader();\n    }\n    showNotification();\n    checkBtnLoadMoreVisible();\n    e.target.reset();\n})\n\n\n\nrefs.btnLoadMoreEl.addEventListener('click', async () => {\n    page += 1;\n        checkBtnLoadMoreVisible();\n    showNotification();\n    showLoader();\n    try {\n        const res = await getImagesByQuery(inputValue, page)\n        const markup = createGallery(res.hits);\n        refs.galleryEl.insertAdjacentHTML('beforeend', markup);\n\n          gallery.refresh();\n\n        const firstCard = document.querySelector('.photo-card');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n        hideLoader();\n        \n    } catch {\n         iziToast.error({\n                title: 'Error',\n                position: 'bottomRight'\n         });\n        hideLoader();\n    }\n})\n\n\nfunction checkBtnLoadMoreVisible() {\n    if (page < maxPage) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton();\n    }\n}\n\n\nfunction showNotification() {\n    if (maxPage === 0) {\n        iziToast.error({\n            title: `Sorry, there are no images matching your search query. Please try again!`,\n            position: 'bottomRight'\n        })\n    } else if (page === maxPage) {  \n        iziToast.info({\n            title: `We're sorry, but you've reached the end of search results.`,\n            position: 'bottomRight'\n        })\n    } else if (page === 1) {\n        iziToast.info({\n            title: `Max page: ${maxPage}`,\n            position: 'bottomRight'\n        })\n    }\n}"],"names":["getImagesByQuery","query","page","axios","refs","createGallery","images","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","gallery","SimpleLightbox","inputValue","maxPage","PAGE_SIZE","e","res","markup","iziToast","showNotification","checkBtnLoadMoreVisible","firstCard","cardHeight"],"mappings":"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"}